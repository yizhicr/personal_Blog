# ==================== 应用配置 ====================
spring.application.name=my-blog
server.port=8080

# ==================== 编码配置 ====================
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true
server.servlet.encoding.force-request=true
server.servlet.encoding.force-response=true
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true

# 添加字符过滤器配置
spring.web.resources.add-mappings=true

# ==================== 数据库配置 ====================
# MySQL 连接配置
spring.datasource.url=jdbc:mysql://localhost:3306/my_blog?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&useSSL=false&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=123456
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# 连接池配置（优化）
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.connection-timeout=30000

# ==================== JPA 配置 ====================
# 自动更新表结构（开发环境使用，生产环境改为 validate 或 none）
spring.jpa.hibernate.ddl-auto=update
# 显示 SQL 语句（开发时开启，便于调试）
spring.jpa.show-sql=true
# 格式化 SQL 输出
spring.jpa.properties.hibernate.format_sql=true
# 数据库方言
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# ==================== JWT 配置 ====================
jwt.secret=FC4A83E7C269487854430BA5BF00B131FC4A83E7C269487854430BA5BF00B131
jwt.expiration=3600000  # 1 hour in milliseconds

# ==================== 文件上传配置 ====================
# 最大文件大小
spring.servlet.multipart.max-file-size=20MB
# 最大请求大小
spring.servlet.multipart.max-request-size=20MB
# 启用multipart上传支持
spring.servlet.multipart.enabled=true

# 文件上传路径（可自定义，如果不设置则使用默认值）
file.upload.path=${user.home}/uploads/
# 文件访问的基础URL
file.upload.base-url=http://localhost:8080/uploads/
# 文件上传最大大小（字节）- 默认20MB
file.upload.max-size=20971520
# 允许的文件类型，逗号分隔
file.upload.allowed-types=image/jpeg,image/png,image/gif,application/pdf,text/plain,video/mp4,video/mpeg,video/quicktime,audio/mpeg,audio/wav

# ==================== 开发配置 ====================
# 热部署
spring.devtools.restart.enabled=true
spring.devtools.restart.additional-paths=src/main/java
spring.devtools.restart.exclude=static/**,public/**

# ==================== 日志配置 ====================
# 设置我们包的日志级别为 DEBUG，便于调试
logging.level.com.yizhcr.my_blog=DEBUG
# 显示 SQL 参数（开发时开启，生产环境关闭）
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ==================== Tomcat配置 ====================
# 设置URI编码
server.tomcat.uri-encoding=UTF-8